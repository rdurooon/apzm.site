<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='images/icon.jpg') }}" />
    <link href="https://fonts.googleapis.com/css2?family=Nosifer&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="{{url_for('static', filename='css/home.css')}}" />
    <script src="{{url_for('static', filename='js/home.js')}}" defer></script>

    <title>{{ seo.title }}</title>
    <meta name="description" content="{{ seo.description }}" />
    <meta name="keywords" content="{{ seo.keywords }}" />

    <!-- Open Graph (Facebook, WhatsApp, Discord, Instagram, etc.) -->
    <meta property="og:title" content="{{ seo.title }}" />
    <meta property="og:description" content="{{ seo.description }}" />
    <meta property="og:image" content="{{ url_for('static', filename='images/share_banner.jpg', _external=True) }}" />
    <meta property="og:url" content="https://amapazombies.com.br/" />
    <meta property="og:type" content="website" />

    <!-- Twitter Cards -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="{{ seo.title }}" />
    <meta name="twitter:description" content="{{ seo.description }}" />
    <meta name="twitter:image" content="{{ url_for('static', filename='images/share_banner.jpg', _external=True) }}" />

    <meta property="og:logo" content="{{ url_for('static', filename='images/icon.png', _external=True) }}">
</head>


<body>
    <script>
        const slideImages = JSON.parse('{{ slide_images | tojson | safe }}');
        let IS_LOGGED_IN = {{ 'true' if logged_in else 'false' }};

        const LOGGED_USER = {
            username: "{{ username | escape }}",
            email: "{{ email | escape }}",
            password_masked: "{{ password_masked | escape }}",
            is_admin: {{ 'true' if is_admin else 'false' }}
        };
    </script>
    <header class="header">
        <div class="menu-btn" id="menu-btn">‚ò∞</div>
        <h1 class="site-title">Amap√° Zombies</h1>
        <div class="auth-buttons">
            {% if not logged_in %}
            <button class="btn-register">Cadastrar</button>
            <button class="btn-login">Entrar</button>
            {% else %}
            <span class="welcome-message">Ol√°, {{ username }}!</span>
            <button class="btn-logout" onclick="location.href='/logout'">
                Sair
            </button>
            {% if is_admin %}
            <button class="btn-admin" onclick="location.href='/admin'">
                Admin
            </button>
            {% endif %} {% endif %}
        </div>
    </header>

    <!-- Overlay da sidebar -->
    <div id="sidebar-overlay" class="sidebar-overlay"></div>

    <!-- Sidebar -->
    <div id="sidebar" class="sidebar">
        <div class="sidebar-header">
            <span id="sidebar-close" class="sidebar-close">&times;</span>
        </div>
        <div class="sidebar-content">
            <button id="btn-user-account" class="sidebar-guide">Sua Conta</button>
            <button id="btn-who-us" class="sidebar-guide">Quem somos</button>
        </div>
    </div>

    <!-- Hero Section -->
    <section class="hero">
        <div class="background-slideshow" id="background-slideshow"></div>
        <img src="{{ url_for('static', filename='images/common/amapazombies.png') }}" alt="Amap√° Zombies Logo"
            class="main-logo" />

    </section>

    <!-- Conte√∫do abaixo -->
    <main class="content">
        <!-- Cards Din√¢micos -->
        <div class="cards-container">
            {% for card in cards %}
            <div class="card" data-title="{{ card.title | e }}" data-description="{{ card.description | e }}"
                data-visible="{{ 'true' if card.get('visible', True) else 'false' }}">
                {% if card.get("is_new", False) %}
                <div class="new-badge">Novo!</div>
                {% endif %}
                <img src="{{ url_for('static', filename='images/cards/' ~ card.file) }}" alt="{{ card.title }}" />
            </div>
            {% endfor %}
        </div>
    </main>

    <!-- Popup Overlay -->
    <div class="popup-overlay" id="popup-overlay">
        <div class="popup" id="popup">
            <span class="popup-close" id="popup-close">&times;</span>
            <img src="" alt="Card Detalhe" id="popup-image" />
            <div class="popup-content">
                <div class="popup-title" id="popup-title">
                    T√≠tulo do Mapa/Hist√≥ria
                </div>
                <div class="popup-description" id="popup-description">
                    Aqui vai o resumo ou sinopse do mapa/hist√≥ria. Lorem ipsum dolor sit
                    amet, consectetur adipiscing elit. Curabitur non nulla sit amet nisl
                    tempus convallis quis ac lectus.
                </div>
                <!-- Coment√°rios -->
                <div id="popup-comments">
                    <h3>Coment√°rios</h3>
                    <div id="comments-container">
                        <!-- Coment√°rios carregados dinamicamente aqui -->
                    </div>
                    
                    <!-- √Årea de envio -->
                    <div class="comment-input-area">
                        {% if logged_in %}
                        <input type="text" id="comment-input" maxlength="120" placeholder="Escreva um coment√°rio..." />
                        <button id="comment-submit">‚û§</button>
                        {% else %}
                        <p class="login-warning">
                            Voc√™ precisa realizar o <span id="login-link" style="color: darkgreen; font-weight: 2000; text-decoration: underline; cursor: pointer;">login</span> para comentar/curtir.
                        </p>
                        {% endif %}
                    </div>
                </div>
                <div class="popup-buttons">
                    <div class="popup-buttons">
                        <button id="btn-download-map">Baixar mapa</button>
                        <button id="btn-read-story">Ler hist√≥ria</button>
                        <button id="btn-like" class="like-btn">
                            <span class="like-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="none" stroke="darkgreen" stroke-width="1.5" class="bi bi-hand-thumbs-up" viewBox="0 0 16 16">
                                <path d="M8.864.046C7.908-.193 7.02.53 6.956 1.466c-.072 1.051-.23 2.016-.428 2.59-.125.36-.479 1.013-1.04 1.639-.557.623-1.282 1.178-2.131 1.41C2.685 7.288 2 7.87 2 8.72v4.001c0 .845.682 1.464 1.448 1.545 1.07.114 1.564.415 2.068.723l.048.03c.272.165.578.348.97.484.397.136.861.217 1.466.217h3.5c.937 0 1.599-.477 1.934-1.064a1.86 1.86 0 0 0 .254-.912c0-.152-.023-.312-.077-.464.201-.263.38-.578.488-.901.11-.33.172-.762.004-1.149.069-.13.12-.269.159-.403.077-.27.113-.568.113-.857 0-.288-.036-.585-.113-.856a2 2 0 0 0-.138-.362 1.9 1.9 0 0 0 .234-1.734c-.206-.592-.682-1.1-1.2-1.272-.847-.282-1.803-.276-2.516-.211a10 10 0 0 0-.443.05 9.4 9.4 0 0 0-.062-4.509A1.38 1.38 0 0 0 9.125.111z"/>
                            </svg>
                            </span>
                            <span id="like-count">0</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Popup Quem Somos -->
    <div class="popup-overlay" id="who-us-popup-overlay">
        <div class="popup who-us-popup" id="who-us-popup">
            <span class="popup-close" id="who-us-popup-close">&times;</span>
            <div class="who-us-content">
                <img src="{{ url_for('static', filename='images/common/amapazombies.png') }}" alt="Amap√° Zombies Logo" class="who-us-logo" />
                <div class="who-us-text">
                    <h2>Quem Somos</h2>
                    <p>
                        Somos o Amap√° Zombies, um projeto que mistura a cultura do Amap√° com a jogabilidade e a narrativa inspiradas em CoD Zombies.
                        Criamos hist√≥rias imersivas e mapas exclusivos para Minecraft Java, trazendo para o jogo elementos cl√°ssicos do modo Zombies ‚Äî como perks, mec√¢nicas e muito mais ‚Äî em cen√°rios √∫nicos ambientados no Amap√°.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Popup Sua Conta -->
    <div class="popup-overlay" id="account-popup-overlay">
        <div class="popup account-popup" id="account-popup">
            <span class="popup-close" id="account-popup-close">&times;</span>
            <div class="account-guide">üìå Sua Conta</div>
            <div class="account-content">

                <!-- Usu√°rio -->
                <label>Usu√°rio</label>
                <div class="account-input-wrapper">
                    <input type="text" id="account-username-popup" class="account-input" value="{{ username or '' }}" data-username="{{ username or '' }}" readonly>
                    <div id="account-username-tooltip-popup" class="tooltip">
                        <p id="rule-length-popup">‚Ä¢ Nome deve ter entre 5 e 20 caracteres</p>
                        <p id="rule-special-popup">‚Ä¢ N√£o pode conter caracteres especiais ($, #, @, etc.)</p>
                        <p id="rule-first-upper-popup">‚Ä¢ Primeira letra deve ser mai√∫scula</p>
                        <p id="rule-no-number-start-popup">‚Ä¢ N√£o pode come√ßar com n√∫mero</p>
                        <p id="rule-badwords-popup">‚Ä¢ N√£o pode conter palavras ofensivas</p>
                    </div>
                </div>

                <!-- Email -->
                <label>Email</label>
                <div class="account-input-wrapper">
                    <input type="email" id="account-email-popup" class="account-input" value="{{ email or '' }}" data-email="{{ email or '' }}" readonly>
                    <div id="account-email-tooltip-popup" class="tooltip">
                        <p id="rule-email-format-popup">‚Ä¢ Email deve ser v√°lido (ex: usuario@dominio.com)</p>
                    </div>
                </div>

                <!-- Senha -->
                <label id="account-password-label">Senha</label>
                <input type="password" id="account-password" class="account-input" value="{{ password_masked or '********' }}" data-password="{{ password_masked or '********' }}" readonly>
            </div>

            <div class="account-buttons">
                <!-- <button id="btn-edit-account" class="btn-green">Editar</button>
                <button id="btn-save-account" class="btn-green" style="display: none;">Salvar</button>
                <button id="btn-cancel-edit" class="btn-red" style="display: none;">Cancelar</button> -->
                <button id="btn-delete-account" class="btn-red">Deletar Conta</button>
            </div>
        </div>
    </div>

    <!-- Popup de confirma√ß√£o de exclus√£o -->
    <div class="popup-overlay" id="delete-account-popup-overlay">
        <div class="popup delete-popup">
            <p class="delete-popup-text">Tem certeza que deseja deletar sua conta? Esta a√ß√£o n√£o pode ser desfeita.</p>
            <div class="delete-popup-buttons">
                <button id="confirm-delete-account" class="btn-red">Sim, quero deletar</button>
                <button id="cancel-delete-account" class="btn-gray">Cancelar</button>
            </div>
        </div>
    </div>

    <!-- Overlay de Login/Cadastro -->
    <div class="popup-overlay" id="auth-popup-overlay">
        <!-- Aviso r√°pido -->
        <div id="quick-warning" style="
          display: none;
          position: fixed;
          top: 20px;
          left: 50%;
          transform: translateX(-50%);
          background: #ff5555;
          color: white;
          padding: 12px 20px;
          border-radius: 8px;
          box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
          z-index: 9999;
          opacity: 0;
          transition: opacity 0.5s;
        "></div>
        <div class="auth-popup">
            <span class="popup-close" id="auth-popup-close">&times;</span>

            <!-- Login -->
            <div class="auth-content" id="login-popup">
                <h2 class="auth-title">ENTRAR</h2>
                <input type="email" name="email" autocomplete="email" placeholder="Email: exemplo@email.com" class="auth-input" />
                <input type="password" name="password" autocomplete="current-password" placeholder="Senha: ********" class="auth-input" />
                <button class="auth-btn">Entrar</button>
                <p class="auth-switch">
                    Ainda sem uma conta?
                    <span id="switch-to-register">Cadastrar-se</span><br><br>
                </p>
                <p class="forgot-password">
                    <a href="#" id="forgot-password-link">Esqueceu sua senha?</a>
                </p>
            </div>

            <!-- Cadastro -->
            <div class="auth-content" id="register-popup" style="display: none">
                <h2 class="auth-title">CADASTRO</h2>

                <!-- Campo Usu√°rio -->
                <div class="input-wrapper">
                    <input type="text" id="username" placeholder="Nome de usu√°rio: JucelinoPexeira"
                        class="auth-input" />
                    <!-- Cadastro -->
                    <div class="username-tooltip" id="username-tooltip">
                        <p id="rule-username-length">‚Ä¢ Nome deve ter entre 5 e 20 caracteres</p>
                        <p id="rule-username-special">‚Ä¢ N√£o pode conter caracteres especiais ($, #, @, etc.)</p>
                        <p id="rule-username-first-upper">‚Ä¢ Primeira letra deve ser mai√∫scula</p>
                        <p id="rule-username-no-number-start">‚Ä¢ N√£o pode come√ßar com n√∫mero</p>
                        <p id="rule-username-badwords">‚Ä¢ N√£o pode conter palavras ofensivas</p>
                    </div>
                </div>

                <!-- Campo Email -->
                <div class="input-wrapper">
                    <input type="email" name="email" autocomplete="email" id="email" placeholder="Email: exemplo@email.com" class="auth-input" />
                    <div class="email-tooltip" id="email-tooltip">
                        <p id="rule-email-format">
                            ‚Ä¢ Email deve ser v√°lido (ex: usuario@dominio.com)
                        </p>
                    </div>
                </div>

                <!-- Campo Senha -->
                <div class="input-wrapper">
                    <input type="password" name="password" autocomplete="new-password" id="password" placeholder="Senha: ********" class="auth-input" />
                    <div class="password-tooltip" id="password-tooltip">
                        <p id="rule-password-length">‚Ä¢ M√≠nimo de 8 caracteres</p>
                        <p id="rule-password-upper">
                            ‚Ä¢ Deve conter pelo menos uma letra mai√∫scula
                        </p>
                        <p id="rule-password-lower">
                            ‚Ä¢ Deve conter pelo menos uma letra min√∫scula
                        </p>
                        <p id="rule-password-number">
                            ‚Ä¢ Deve conter pelo menos um n√∫mero
                        </p>
                        <p id="rule-password-special">
                            ‚Ä¢ Deve conter pelo menos um caractere especial (!@#$%^&*)
                        </p>
                    </div>
                </div>

                <label class="auth-checkbox">
                    <input type="checkbox" />
                    Confirmo que a senha utilizada n√£o √© a mesma que √© usada em outros
                    lugares importantes
                </label>
                <button class="auth-btn">Cadastrar</button>
                <p class="auth-switch">
                    J√° possui uma conta? <span id="switch-to-login">Entrar</span>
                </p>
            </div>
        </div>
    </div>

    <!-- Overlay do popup de recupera√ß√£o -->
    <div id="forgot-password-overlay" class="popup-overlay">
        <div id="forgot-password-popup" class="auth-popup">
            <span id="close-forgot-password" class="popup-close">&times;</span>
            <h2 class="auth-title">Recuperar Senha</h2>
            <input 
            type="email" 
            id="forgot-password-email" 
            class="auth-input" 
            placeholder="Digite seu e-mail" 
            />
            <button id="forgot-password-btn" class="auth-btn">
            Enviar Link de Recupera√ß√£o
            </button>
            <div id="forgot-password-loading" class="loading-overlay" style="display:none;">
            <div class="spinner"></div>
            Enviando...
            </div>
        </div>
    </div>

    <!-- Rodap√© -->
    <footer class="footer">
        <h3>Nossa redes sociais</h3>
        <br />
        <a href="https://instagram.com/amapazombies" target="_blank">
            <img src="{{ url_for('static', filename='images/social/instagram.png') }}" alt="Instagram" />
        </a>
        <a href="https://x.com/amapazombies" target="_blank">
            <img src="{{ url_for('static', filename='images/social/twitter.png') }}" alt="Twitter/X" />
        </a>
        <a href="https://wattpad.com/user/AmapaZombies" target="_blank">
            <img src="{{ url_for('static', filename='images/social/wattpad.png') }}" alt="Wattpad" />
        </a>
        <a href="mailto:contato@amapazombies.com.br" target="_blank">
            <img src="{{ url_for('static', filename='images/social/email.png') }}" alt="Email" />
        </a>
    </footer>

    <script>
        if (window.location.search.includes("utm_")) {
            const cleanUrl = window.location.protocol + "//" + window.location.host + window.location.pathname;
            window.history.replaceState({}, document.title, cleanUrl);
        }
    </script>
</body>

</html>